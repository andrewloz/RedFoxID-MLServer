syntax = "proto3";
option go_package = "github.com/main/main";

service DetectObject {
    rpc Request(RequestPayload) returns (ResponsePayload) {}
}

message BoxXYWH {
    float x = 1;
    float y = 2;
    float w = 3;
    float h = 4;
}

message Detection {
  BoxXYWH box   = 1;
  float   confidence = 2;
  int32   class_id = 3;
  string  class_name = 4; // optional
}

message ResponsePayload {
  repeated Detection objects = 1;
}

message RequestPayload {
    // Specifies the data source for inference. sending the image as rgba byte array. 
    bytes image_rgba_bytes = 1;
    int32 image_width = 2;
    int32 image_height = 3;
    // 	Sets the minimum confidence threshold for detections. 
    // Objects detected with confidence below this threshold will be disregarded. 
    // Adjusting this value can help reduce false positives.
    float confidence_threshold = 4;
    // Intersection Over Union (IoU) threshold for Non-Maximum Suppression (NMS). 
    // Lower values result in fewer detections by eliminating overlapping boxes, useful for reducing duplicates.
    float iou_threshold = 5;
    string image_name = 6;
    string model_name = 7;
}
